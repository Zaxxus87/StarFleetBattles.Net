@using StarFleetBattles.Domain.ValueObjects

<div class="ssd-container">
    <div class="button-bar">
        <button type="button" @onclick="OnBackToEnergy" class="btn btn-primary">Back to Energy Allocation</button>
    </div>

    <div class="ssd-display">
        <h3 class="ssd-title">FEDERATION TOURNAMENT COMMAND CRUISER</h3>

        <div class="ssd-image-container">
            <img src="/images/ssd-fed-cruiser.png" alt="Ship Status Display" class="ssd-background" />

            <!-- Clickable damage boxes will be overlaid on the image -->
            <!-- These positions will need to be adjusted based on the actual image -->
        </div>
    </div>
</div>

@code {
    [Parameter] public EventCallback OnBackToEnergy { get; set; }

    private Dictionary<string, bool> damageBoxes = new();

    protected override void OnInitialized()
    {
        InitializeDamageBoxes();
    }

    private void InitializeDamageBoxes()
    {
        // Initialize all damage boxes as unchecked (false)
        // We'll add specific box IDs based on the SSD layout

        // Example structure - you'll need to expand this based on all boxes in the image
        // Format: "SystemName-BoxNumber"

        // Shield boxes
        for (int i = 1; i <= 6; i++)
        {
            for (int j = 1; j <= 8; j++)
            {
                damageBoxes[$"Shield{i}-{j}"] = false;
            }
        }

        // Phaser boxes
        for (int i = 1; i <= 4; i++)
        {
            for (int j = 1; j <= 3; j++)
            {
                damageBoxes[$"Phaser{i}-{j}"] = false;
            }
        }

        // Photon Torpedo boxes
        for (int i = 1; i <= 4; i++)
        {
            for (int j = 1; j <= 3; j++)
            {
                damageBoxes[$"PhotonTorp{i}-{j}"] = false;
            }
        }

        // Warp Engine boxes
        damageBoxes["WarpL-1"] = false;
        damageBoxes["WarpL-2"] = false;
        damageBoxes["WarpR-1"] = false;
        damageBoxes["WarpR-2"] = false;

        // Impulse Engine boxes
        for (int i = 1; i <= 3; i++)
        {
            damageBoxes[$"Impulse-{i}"] = false;
        }

        // Additional systems will be added as needed
    }

    private void ToggleDamageBox(string boxId)
    {
        if (damageBoxes.ContainsKey(boxId))
        {
            damageBoxes[boxId] = !damageBoxes[boxId];
        }
    }
}

<style>
    .ssd-container {
        height: 100%;
        display: flex;
        flex-direction: column;
        background: white;
    }

    .button-bar {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
        padding: 10px;
        background-color: #f8f9fa;
        border-radius: 4px;
    }

    .ssd-display {
        flex: 1;
        overflow: auto;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .ssd-title {
        text-align: center;
        margin-bottom: 20px;
        color: #333;
        font-weight: bold;
    }

    .ssd-image-container {
        position: relative;
        max-width: 100%;
        display: flex;
        justify-content: center;
    }

    .ssd-background {
        max-width: 100%;
        height: auto;
        border: 2px solid #333;
    }

    .btn {
        padding: 8px 16px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: 500;
        font-size: 14px;
    }

    .btn-primary {
        background-color: #007bff;
        color: white;
    }

        .btn-primary:hover {
            background-color: #0056b3;
        }
</style>